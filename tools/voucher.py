import random
import threading
import os


# 10x3的二维字符串数组，已经确定
# strings = [
#     ['11556.29', '15310.84', '7432.84', '16339.94', '2585.96'],
#     ['16331.36', '15904.72', '10137.07', '5907.32', '10297.02'],
#     ['18171.52', '4717.30', '16369.52', '8316.53', '14721.24'],
#     ['4467.23', '10521.62', '14172.71', '11523.81', '6615.25'],
#     ['2938.33', '2297.61', '255.18', '17188.23', '11479.05'],
#     ['6792.89', '7713.74', '454.77', '10780.95', '12865.27'],
#     ['5505.56', '3523.35', '13927.93', '7778.33', '2085.55'],
#     ['6764.13', '14301.73', '15927.35', '10678.94', '4225.54'],
#     ['12217.98', '13008.35', '15605.47', '7188.97', '11683.64'],
#     ['5349.30', '14805.69', '15653.46', '10518.89', '13772.98'],
#     ['16274.40', '13907.84', '18831.81', '19455.75', '16072.42'],
#     ['5361.41', '14393.67', '2114.73', '7225.95', '7669.86'],
#     ['15638.02', '1569.57', '10761.10', '9480.12', '5411.23'],
#     ['14853.99', '17862.56', '19735.37', '7377.70', '11599.62'],
#     ['11683.13', '9358.00', '10350.43', '8594.69', '14200.04'],
#     ['10593.22', '9666.24', '14677.38', '197.92', '4092.52'],
#     ['14740.79', '19591.76', '19865.69', '11006.70', '4259.13'],
#     ['17190.73', '6406.26', '13489.12', '11075.86', '2517.94'],
#     ['13575.98', '6764.58', '11732.43', '686.74', '12722.08'],
#     ['5855.27', '13117.48', '14433.02', '4955.46', '3759.10'],
#     ['16508.36', '14786.51', '12163.02', '7612.39', '5219.88'],
#     ['16202.44', '4421.51', '10778.37', '13183.79', '19461.65'],
#     ['3830.82', '10185.47', '10620.42', '19033.18', '5071.26'],
#     ['15333.05', '12697.65', '12686.52', '5869.31', '19232.46'],
#     ['5684.11', '3592.99', '11457.88', '11218.99', '3460.71'],
#     ['15577.99', '13109.62', '5687.45', '15254.51', '5880.44'],
#     ['19405.16', '4369.69', '15381.44', '16086.04', '14944.56'],
#     ['3174.48', '17162.55', '16370.79', '8410.75', '18903.84'],
#     ['14018.93', '3464.41', '16323.62', '16179.37', '155.12'],
#     ['17209.30', '13361.72', '16218.24', '18753.10', '15617.15'],
#     ['5656.59', '13356.44', '876.88', '7732.45', '3090.54'],
#     ['10127.28', '17869.11', '13561.36', '1052.43', '2662.72'],
#     ['14079.26', '16427.34', '10391.46', '3033.11', '908.03'],
#     ['17708.73', '7037.30', '1771.38', '2615.64', '14590.28'],
#     ['11112.42', '11267.53', '6668.97', '14761.33', '7820.18'],
#     ['14558.28', '16066.53', '292.56', '3583.49', '9138.57'],
#     ['6233.67', '16202.89', '14637.43', '6141.49', '10101.85'],
#     ['14347.88', '583.57', '6579.59', '15359.76', '19307.31'],
#     ['1521.60', '11250.77', '4710.02', '17871.67', '11716.72'],
#     ['13014.35', '2050.63', '11879.98', '8545.25', '5303.62'],
#     ['1979.29', '281.07', '12085.36', '222.78', '7824.28'],
#     ['19222.03', '12425.96', '934.92', '18296.08', '1841.14'],
#     ['14386.80', '11603.05', '15445.87', '7083.86', '7513.46'],
#     ['5969.60', '11269.34', '2855.05', '11590.15', '7963.74'],
#     ['4112.62', '11898.74', '9354.03', '19264.75', '13393.31'],
#     ['14913.22', '10448.60', '7243.17', '13809.12', '8634.98'],
#     ['15875.98', '14296.05', '6443.99', '18557.75', '14725.19'],
#     ['6185.15', '7386.94', '3085.33', '19459.13', '13477.61'],
#     ['8766.64', '2702.08', '9778.68', '5578.32', '15553.14'],
#     ['8745.31', '14755.61', '6612.81', '8425.72', '14852.13'],
#     ['5388.91', '17137.83', '5468.14', '18664.84', '2324.59'],
#     ['2763.54', '9419.72', '11453.57', '10881.61', '19050.28'],
#     ['2603.14', '4795.04', '15108.37', '4664.47', '11521.55'],
#     ['1436.01', '3368.74', '3868.71', '11560.80', '2321.26'],
#     ['13904.83', '15235.54', '19372.76', '11559.90', '911.28'],
#     ['11213.31', '7811.98', '164.51', '18378.28', '11044.26'],
#     ['11006.95', '17132.45', '13459.45', '16358.93', '9420.43'],
#     ['4775.45', '410.34', '10497.16', '4094.00', '16337.84'],
#     ['19768.53', '7034.94', '5797.19', '1733.33', '11001.99'],
#     ['13754.68', '13065.07', '1301.53', '11213.70', '12196.60'],
#     ['6475.95', '18439.95', '8735.80', '12559.16', '3041.78'],
#     ['770.52', '13082.43', '19465.81', '2454.18', '12200.79'],
#     ['18989.62', '19007.25', '19224.38', '9084.72', '3517.65'],
#     ['12865.05', '8858.49', '15312.30', '11148.95', '17694.39'],
#     ['19373.19', '12973.25', '16561.71', '15331.98', '14028.88'],
#     ['14036.64', '15703.73', '1102.08', '1134.81', '8818.72'],
#     ['11615.10', '5757.80', '11996.87', '5170.57', '19444.06'],
#     ['856.78', '11994.16', '6572.49', '12993.93', '11164.59'],
#     ['2052.23', '12215.19', '12653.09', '1888.01', '6128.15'],
#     ['675.29', '712.25', '4869.63', '18396.32', '11030.21'],
#     ['17689.10', '4470.24', '7109.77', '9992.89', '12940.17'],
#     ['2905.67', '15587.12', '13385.04', '19860.95', '11211.16'],
#     ['18153.62', '9388.41', '8446.85', '9913.24', '17794.53'],
#     ['17292.14', '8846.36', '3499.48', '11765.45', '13232.93'],
#     ['10173.04', '17822.47', '10336.88', '4824.73', '18362.28'],
#     ['8956.30', '1684.73', '6376.15', '8889.46', '8432.24'],
#     ['14396.26', '3430.30', '7229.77', '3394.12', '14295.35'],
#     ['14227.70', '17469.08', '3229.98', '19641.58', '1910.22'],
#     ['979.55', '682.21', '6333.44', '11420.37', '6673.49'],
#     ['6863.55', '9537.26', '16360.51', '9522.00', '9144.22'],
#     ['1120.34', '17949.13', '8953.72', '12329.57', '8658.60'],
#     ['3425.37', '19160.17', '3336.36', '9994.21', '19813.13'],
#     ['18391.74', '11952.15', '6688.59', '11750.61', '17273.56'],
#     ['8997.62', '14445.59', '18259.69', '3576.40', '6565.28'],
#     ['4230.54', '5677.60', '15947.93', '16047.79', '12167.85'],
#     ['10781.88', '3706.91', '12389.57', '16304.44', '2913.76'],
#     ['598.99', '9385.42', '14671.98', '976.30', '416.79'],
#     ['3615.09', '12722.70', '1844.93', '13686.11', '19137.51'],
#     ['15231.55', '13357.66', '5485.99', '13326.00', '13747.33'],
#     ['18545.04', '15934.72', '2536.52', '8129.37', '14911.59'],
#     ['8350.15', '5826.34', '13803.84', '269.65', '12044.52'],
#     ['14852.68', '10126.34', '11967.66', '4733.57', '13482.03'],
#     ['14151.71', '15919.82', '104.28', '18598.09', '12817.11'],
#     ['2584.23', '4338.75', '13987.59', '19193.86', '10618.06'],
#     ['11551.58', '19448.27', '10856.00', '17227.91', '5287.79'],
#     ['9258.96', '9768.65', '17513.41', '10884.05', '18361.86'],
#     ['13379.99', '1413.68', '10288.87', '13627.68', '8942.60'],
#     ['3715.08', '6877.18', '2824.42', '6351.73', '7664.35'],
#     ['15494.62', '10554.49', '16879.56', '13397.57', '17508.99'],
#     ['17766.46', '3422.25', '16637.00', '14246.00', '969.56']
# ]

def generate_random():
    row = random.randint(0, 80)
    col = random.randint(0, 4)
    return row, col


def timeout_handler():
    print("\n时间到了，程序结束。")
    os._exit(0)


def time_out(num):
    # 设置定时器，num秒后调用 timeout_handler 函数
    timer = threading.Timer(num, timeout_handler)
    timer.start()


def fun():
    strings = make_data()
    correct_count = 0
    total_count = 0
    count = 1
    time_out(300)
    while True:
        row, col = generate_random()
        print("=======================")
        # print("输入从第{}页的第{}行数据".format(row + 1, col + 1))
        for i in range(0, 20):
            # print("输入第{}组数据--第{}页的第{}行数据".format(count, row + i, col + 1))
            s = strings[i + row][col]
            print(s)
            print("请输入对应字符串：")
            user_input = input()
            new_str = user_input[:-2] + "." + user_input[-2:]
            if new_str == s:
                correct_count += 1
            total_count += 1
            accuracy = (correct_count / total_count) * 100 if total_count != 0 else 0
            print("=====" + new_str + "=======")
            print("准确率：{}%".format(accuracy))
            print("correct_count = ", correct_count, "\ncount = ", total_count)
        count += 1


def make_data():
    # 随机生成100*5的二维数组，长度在4到7之间，保留两位小数
    data = [[format(random.uniform(100, 20000), '.2f') for _ in range(5)] for _ in range(100)]
    # 打印结果
    # for row in data:
    #     print(row, end=",\n")
    return data


if __name__ == '__main__':
    fun()
    # make_data()
